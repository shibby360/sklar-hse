<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sklar HSE</title>
</head>
<body>
    <table id="maintable">
        <tr>
            <th></th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Thursday</th>
            <th>Friday</th>
        </tr>
    </table>
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js" integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
    <script>
        function writeTable(text) {
            let parser = new DOMParser()
            let content = parser.parseFromString(text, 'text/html')
            let jqcontent = $(content)
            let lines = jqcontent.find('p').filter(function(index, element) {
                return $(element).text().trim().length
            })
            lines = lines.slice(1)
            let maintable = $('#maintable')
            let currTr;
            let dayList = ['','','','']
            for(let line of lines) {
                let td = $('<td>')
                line = $(line)
                let lntxt = line.text()
                if(lntxt.startsWith('Week')) {
                    if(currTr) {
                        maintable.append(pushListToRow(dayList, currTr))
                    }
                    currTr = $('<tr>')
                    td.text(line.text())
                    currTr.append(td)
                } else {
                    if(lntxt.startsWith('Monday')) {
                        dayList[0] = lntxt.replace('Monday — ','')
                    } else if(lntxt.startsWith('Tuesday')) {
                        dayList[1] = lntxt.replace('Tuesday — ','')
                    } else if(lntxt.startsWith('Thursday')) {
                        dayList[2] = lntxt.replace('Thursday — ','')
                    } else if(lntxt.startsWith('Friday')) {
                        dayList[3] = lntxt.replace('Friday — ','')
                    }
                }
            }
        }
        function pushListToRow(arr, trEl) {
            for(let day of arr) {
                let td = $('<td>')
                td.text(day)
                trEl.append(td)
            }
            return trEl
        }
        fetch('https://sklar-server.vercel.app/soph-honors').then(function(r) {
            r.text().then(writeTable)
        })
    </script>
</body>
</html>
<!-- https://stackoverflow.com/questions/74452866/how-preview-a-html-file-github-codespaces -->